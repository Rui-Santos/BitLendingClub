<div id="login-section">
    <header>
        <h2><?php echo $this->translate('Login'); ?></h2>
        <?php echo $this->translate('or'); ?>        
        <a href="<?php echo $this->url(array('controller' => 'auth', 'action' => 'register'), null, true); ?>" id="register-dialog"><?php echo $this->translate('Register'); ?></a>
        
        
    </header>    
    <div id="login-container">
        <section class="login-details">
            <h3><?php echo $this->translate('Login'); ?></h3>

            <form action="<?php echo $this->url(array('module' => 'default', 
                'controller' => 'auth', 'action' => 'login'), null, true); ?>" method="post" onsubmit="return doLogin(this);">
            <dl>
                <?php echo $this->form->getElement('email'); ?>

                <?php echo $this->form->getElement('password'); ?>
                
            </dl>                            
                
            <p>
                <?php echo $this->form->getElement('remember_me'); ?>                                            
            </p>    

            <?php if ($this->errorLoginCredentials): ?>
                <p class="errors"><?php echo $this->translate('The e-mail or password you entered is incorrect.'); ?></p>
            <?php endif; ?>
                
            <?php echo $this->form->getElement('login'); ?>
            </form>

           

            <p><a href="#" id="forgotten-password"><?php echo $this->translate('Forgot password?'); ?></a></p>        
        </section> 
        <section class="facebook-details">
            <h3><?php echo $this->translate('Login with facebook'); ?></h3>

            <p><?php echo $this->translate('You can login with facebook'); ?></p>

            <script type="text/javascript">
                $(function(){  
                    $('.fb-login-button').click(function(e){
                        FB.login(function(response) {
                            if (response.authResponse) {
                                this.location = '<?php echo $this->url(
                                        array('controller' => 'auth', 'action' => 'facebook-login'), 
                                            null, true); ?>?token=' + response.authResponse.accessToken;
                            }
                        }, {scope: 'email'});
                    
                        e.preventDefault();
                    });                                        
                });
            </script>
            
            <a href="#" class="fb-login-button" title="<?php echo $this->translate('Login with Facebook'); ?>">&nbsp;</a>
        </section>
    </div>    
</div>